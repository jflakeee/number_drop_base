# Number Drop Clone - 게임 기획서

**문서 버전**: 1.0
**작성일**: 2026-01-20
**플랫폼**: Android
**기술 스택**: Flutter

---

## 1. 게임 개요

### 1.1 기본 정보
| 항목 | 내용 |
|------|------|
| 게임명 | Number Drop Clone |
| 장르 | 퍼즐 / 캐주얼 |
| 원본 참고 | Drop The Number: Merge Puzzle (SuperBox) |
| 타겟 플랫폼 | Android |
| 개발 도구 | Flutter / Dart |

### 1.2 게임 컨셉
- Tetris와 2048을 결합한 숫자 퍼즐 게임
- 같은 숫자 블록을 합쳐서 더 큰 숫자를 만드는 것이 목표
- 간단한 조작, 중독성 있는 게임플레이

### 1.3 제외 기능 (사용자 요청)
- ~~광고 강제 재생~~
- ~~광고 보상 시스템~~
- ~~인앱 결제~~
- ~~소셜 기능 (친구 초대, 글로벌 랭킹)~~

---

## 2. 게임 메커니즘

### 2.1 핵심 게임플레이

#### 블록 드롭
1. 화면 상단에 드롭 예정 블록 표시
2. 사용자가 원하는 열(Column)을 탭
3. 블록이 해당 열로 떨어져서 기존 블록 위에 착지

#### 숫자 합체 규칙
1. 같은 숫자 블록이 **상하좌우로 인접**하면 합체
2. 합체 시 숫자가 **2배**가 됨 (예: 4+4=8)
3. **연쇄 합체**: 합체 후 새 숫자가 또 인접한 같은 숫자와 합체 가능
4. 연쇄가 끝날 때까지 자동으로 진행

#### 숫자 체계
```
2 → 4 → 8 → 16 → 32 → 64 → 128 → 256 → 512 → 1024 → 2048 → 4096 → ...
```

#### 게임 오버 조건
- 블록이 게임 보드 **상단 라인을 넘어서면** 게임 오버

### 2.2 점수 시스템

#### 점수 계산
- 블록 합체 시 합쳐진 숫자만큼 점수 획득
- 예: 32+32=64 → +64점
- 연쇄 콤보 시 추가 보너스 (선택적 구현)

#### 최고 점수
- 로컬에 최고 점수 저장
- 게임 화면에 실시간 표시

---

## 3. UI/UX 설계

### 3.1 화면 구성

```
┌──────────────────────────────────────┐
│  [코인]     점수/최고점수     [랭킹]  │  ← 상단 바
│  [되돌리기] [초대]      [프리미엄] [메뉴] │
├──────────────────────────────────────┤
│         [현재블록] [다음블록]         │  ← 미리보기
├──────────────────────────────────────┤
│  ┌───┬───┬───┬───┬───┐              │
│  │   │   │   │   │   │              │
│  ├───┼───┼───┼───┼───┤              │
│  │   │   │   │   │   │              │
│  ├───┼───┼───┼───┼───┤              │  ← 게임 보드
│  │   │   │   │   │   │              │     (5열 x 8행)
│  ├───┼───┼───┼───┼───┤              │
│  │ 4 │   │   │   │   │              │
│  ├───┼───┼───┼───┼───┤              │
│  │ 8 │ 4 │   │128│   │              │
│  ├───┼───┼───┼───┼───┤              │
│  │256│1024│2048│1024│512│              │
│  └───┴───┴───┴───┴───┘              │
├──────────────────────────────────────┤
│  [마스코트]    [아이템1][아이템2][아이템3] │  ← 하단 바
└──────────────────────────────────────┘
```

### 3.2 게임 보드 사양

| 항목 | 값 |
|------|-----|
| 열(Column) 수 | 5 |
| 행(Row) 수 | 8 |
| 배경색 | #2D2D2D (어두운 회색) |
| 열 구분선 | 세로 라인 (반투명) |

### 3.3 숫자별 색상 정의

| 숫자 | 색상 코드 | 색상명 | 텍스트 색상 |
|------|----------|--------|------------|
| 2 | #E91E63 | 마젠타 | 흰색 |
| 4 | #4DD0E1 | 민트 | 흰색 |
| 8 | #26C6DA | 청록 | 흰색 |
| 16 | #7E57C2 | 보라 | 흰색 |
| 32 | #FF7043 | 주황 | 흰색 |
| 64 | #66BB6A | 녹색 | 흰색 |
| 128 | #78909C | 회청색 | 흰색 |
| 256 | #EC407A | 핑크 | 흰색 |
| 512 | #66BB6A | 녹색 | 흰색 |
| 1024 | #90A4AE | 회색 | 흰색 |
| 2048 | #FF9800 | 주황 | 흰색 + 왕관 |
| 4096+ | 특수 | 그라데이션 | 흰색 |

### 3.4 블록 디자인

```
┌─────────────┐
│             │
│     32      │  ← 숫자 (중앙 정렬, Bold)
│             │
└─────────────┘
   둥근 모서리 (radius: 8-12px)
   그림자 효과 (약간의 elevation)
```

#### 2048 블록 특수 효과
- 왕관 아이콘 (상단)
- 테두리 광택/글로우 효과
- 반짝임 파티클 애니메이션

---

## 4. 애니메이션 명세

### 4.1 블록 드롭 애니메이션

| 속성 | 값 |
|------|-----|
| 타입 | 위→아래 이동 |
| Duration | 200-300ms |
| Curve | Ease-out / Bounce |
| 트리거 | 사용자 열 선택 시 |

```dart
// 예시 코드
AnimatedPositioned(
  duration: Duration(milliseconds: 250),
  curve: Curves.easeOutQuad,
  top: targetY,
  child: BlockWidget(value: blockValue),
)
```

### 4.2 합체 애니메이션

| 속성 | 값 |
|------|-----|
| Phase 1 | 두 블록이 중앙으로 이동 (100ms) |
| Phase 2 | 스케일 확대 후 축소 (150ms) |
| Phase 3 | 새 블록 출현 + 점수 팝업 |

### 4.3 점수 팝업 애니메이션

```
+64  ← 합쳐진 점수 표시
 ↑
 │   위로 떠오르며 페이드 아웃
 │
```

| 속성 | 값 |
|------|-----|
| 이동 | Y축 -50px |
| 페이드 | 1.0 → 0.0 |
| Duration | 500ms |

### 4.4 드롭 그림자 (Preview)

- 드롭 예정 위치에 반투명 그림자 블록 표시
- 색상: 해당 블록 색상의 30% 투명도

---

## 5. 아이템 시스템

### 5.1 되돌리기 (Undo)

| 항목 | 내용 |
|------|------|
| 기능 | 마지막 드롭 취소 |
| 비용 | 무료 (횟수 제한) 또는 코인 |
| 제한 | 1회만 되돌리기 가능 |

### 5.2 망치 (Hammer)

| 항목 | 내용 |
|------|------|
| 기능 | 선택한 블록 1개 제거 |
| 비용 | 코인 (예: 100코인) |
| 사용법 | 망치 버튼 → 블록 탭 |

### 5.3 코인 시스템

| 항목 | 내용 |
|------|------|
| 획득 방법 | 게임 플레이, 일일 보너스 |
| 사용처 | 아이템 구매 |
| 저장 | SharedPreferences |

---

## 6. 화면별 상세

### 6.1 스플래시 화면
- 로고 표시 (2초)
- 로딩 애니메이션

### 6.2 메인 메뉴 화면

```
┌─────────────────────────────────┐
│  [코인 526]  [캐릭터]       ⚙️   │
│                                 │
│         게임 로고               │
│                                 │
│      👑 최고점수: 129,452       │
│                                 │
│      ┌─────────────────┐        │
│      │    게임 시작    │        │
│      └─────────────────┘        │
│                                 │
│      [일일미션] [일일보너스]    │
│                                 │
│      [상점]                     │
│                                 │
└─────────────────────────────────┘
```

### 6.3 게임 화면
- 위 3.1 참조

### 6.4 게임 오버 화면

```
┌─────────────────────────────────┐
│                                 │
│          GAME OVER              │
│                                 │
│       최종 점수: 25,480         │
│       최고 점수: 129,452        │
│                                 │
│      ┌─────────────────┐        │
│      │    다시 하기    │        │
│      └─────────────────┘        │
│      ┌─────────────────┐        │
│      │    메인 메뉴    │        │
│      └─────────────────┘        │
│                                 │
└─────────────────────────────────┘
```

### 6.5 설정 화면
- 사운드 ON/OFF
- 진동 ON/OFF
- 게임 초기화

---

## 7. 기술 구현

### 7.1 프로젝트 구조

```
lib/
├── main.dart                 # 앱 진입점
├── app.dart                  # MaterialApp 설정
├── config/
│   ├── colors.dart           # 숫자별 색상 정의
│   ├── constants.dart        # 게임 상수 (그리드 크기 등)
│   └── theme.dart            # 앱 테마
├── models/
│   ├── block.dart            # 블록 모델 (value, position)
│   ├── game_state.dart       # 게임 상태 (board, score, etc.)
│   └── user_data.dart        # 사용자 데이터 (coins, highscore)
├── screens/
│   ├── splash_screen.dart
│   ├── main_menu_screen.dart
│   ├── game_screen.dart
│   └── game_over_screen.dart
├── widgets/
│   ├── game_board.dart       # 게임 보드 위젯
│   ├── block_widget.dart     # 개별 블록 위젯
│   ├── next_block_preview.dart
│   ├── score_display.dart
│   └── item_button.dart
├── services/
│   ├── game_logic.dart       # 게임 로직 (합체, 드롭 등)
│   ├── audio_service.dart    # 사운드 관리
│   └── storage_service.dart  # 로컬 저장소
└── utils/
    ├── animations.dart       # 커스텀 애니메이션
    └── helpers.dart          # 유틸리티 함수
```

### 7.2 핵심 클래스

#### Block 모델
```dart
class Block {
  final int value;      // 2, 4, 8, 16, ...
  final int row;
  final int column;
  final String id;      // 고유 ID (애니메이션용)

  Color get color => GameColors.getColorForValue(value);
}
```

#### GameState 모델
```dart
class GameState {
  List<List<Block?>> board;  // 5x8 그리드
  int score;
  int highScore;
  Block currentBlock;
  Block nextBlock;
  bool isGameOver;

  // 히스토리 (되돌리기용)
  GameState? previousState;
}
```

### 7.3 게임 로직 흐름

```
1. 게임 시작
   ↓
2. 랜덤 블록 생성 (current, next)
   ↓
3. 사용자 입력 대기 (열 선택)
   ↓
4. 블록 드롭 애니메이션
   ↓
5. 착지 위치 계산
   ↓
6. 합체 검사 (BFS/DFS)
   ├── 합체 있음 → 합체 실행 → 6번 반복
   └── 합체 없음 → 7번으로
   ↓
7. 게임 오버 검사
   ├── 오버 → 게임 오버 화면
   └── 계속 → 2번으로
```

### 7.4 합체 알고리즘

```dart
void checkAndMerge(int row, int col) {
  Block? block = board[row][col];
  if (block == null) return;

  // 인접한 같은 숫자 블록 찾기 (BFS)
  List<Position> sameBlocks = findAdjacentSame(row, col, block.value);

  if (sameBlocks.length >= 2) {
    // 모든 블록 제거
    for (var pos in sameBlocks) {
      board[pos.row][pos.col] = null;
    }

    // 새 블록 생성 (첫 번째 위치에)
    int newValue = block.value * 2;
    board[sameBlocks[0].row][sameBlocks[0].col] = Block(value: newValue);

    // 점수 추가
    score += newValue;

    // 중력 적용 (위 블록들 아래로)
    applyGravity();

    // 재귀적으로 다시 검사
    checkAndMerge(sameBlocks[0].row, sameBlocks[0].col);
  }
}
```

---

## 8. 구현 일정

### Phase 1: 기본 게임 (MVP)
- [ ] Flutter 프로젝트 설정
- [ ] 게임 보드 UI (5x8 그리드)
- [ ] 블록 위젯 (숫자별 색상)
- [ ] 블록 드롭 메커니즘
- [ ] 합체 로직 구현
- [ ] 점수 시스템
- [ ] 게임 오버 조건

### Phase 2: UI/UX
- [ ] 메인 메뉴 화면
- [ ] 상단 UI (점수, 코인)
- [ ] 하단 UI (아이템 버튼)
- [ ] 다음 블록 미리보기
- [ ] 드롭 그림자 표시

### Phase 3: 애니메이션
- [ ] 블록 드롭 애니메이션
- [ ] 합체 애니메이션
- [ ] 점수 팝업
- [ ] 2048 특수 효과

### Phase 4: 기능 추가
- [ ] 되돌리기 기능
- [ ] 망치 아이템
- [ ] 코인 시스템
- [ ] 최고 점수 저장
- [ ] 사운드 효과

### Phase 5: 완성도
- [ ] 설정 화면
- [ ] 앱 아이콘
- [ ] 스플래시 화면
- [ ] Android APK 빌드

---

## 9. 참고 자료

### 9.1 분석 영상
- `res/benchmark_play.mp4` - 기본 게임플레이
- `res/KakaoTalk_20260117_193821478.mp4` - 메인 메뉴 및 기능
- `res/KakaoTalk_20260118_175548917.mp4` - 추가 게임플레이

### 9.2 추출된 프레임
- `res/frames/benchmark/` - 벤치마크 영상 프레임
- `res/frames/video1/` - 비디오1 프레임
- `res/frames/video2/` - 비디오2 프레임

---

*문서 끝*
